<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jogo da Memória - LIBRAS</title>
  <style>
    /* --- mantém o mesmo CSS do seu código original --- */
    /* apenas adicionei ajustes para vídeos */
    .card-back.video video {
      width: 100%;
      height: 100%;
      border-radius: 12px;
      object-fit: cover;
    }
  </style>
</head>
<body>
  <!-- Mesma estrutura HTML (Start overlay, header, etc.) -->
  <div id="startOverlay" class="start-overlay">
    <div class="start-content">
      <h1>Jogo da Memória em LIBRAS</h1>
      <p>
        Encontre os pares correspondentes entre vídeos em LIBRAS e suas
        palavras. Um jogo divertido para aprender e praticar a Língua
        Brasileira de Sinais!
      </p>
      <button id="startButton">Iniciar Jogo</button>
    </div>
  </div>

  <div class="header">
    <h1>Jogo da Memória - LIBRAS</h1>
    <div class="game-info">
      <div class="timer">Tempo: <span id="timer">00:00</span></div>
      <div class="moves">Movimentos: <span id="moveCount">0</span></div>
    </div>
  </div>

  <div id="game"></div>
  <div id="message">Encontre os pares correspondentes!</div>
  <div class="buttons">
    <button id="resetBtn">Reiniciar Jogo</button>
    <button id="backBtn">Voltar aos Jogos</button>
  </div>

  <div class="result-overlay" id="resultOverlay">
    <div class="result-content">
      <h2>Parabéns!</h2>
      <div class="result-stats" id="resultStats">
        Você completou o jogo em <span id="finalTime">00:00</span><br />
        com <span id="finalMoves">0</span> movimentos
      </div>
      <div class="result-buttons">
        <button class="result-btn result-play-again" id="resultPlayAgain">Jogar Novamente</button>
        <button class="result-btn result-back" id="resultBack">Voltar aos Jogos</button>
      </div>
    </div>
  </div>

  <script>
    // Lista de pares: vídeo (gesto) e palavra
    const pairs = [
      { video: "videos/ola.mp4", word: "Olá" },
      { video: "videos/euteamo.mp4", word: "Eu te amo" },
      { video: "videos/bom.mp4", word: "Bom" },
      { video: "videos/ruim.mp4", word: "Ruim" },
      { video: "videos/pare.mp4", word: "Pare" },
      { video: "videos/aplaudir.mp4", word: "Aplaudir" },
      { video: "videos/obrigado.mp4", word: "Obrigado" },
      { video: "videos/ok.mp4", word: "Ok" }
    ];

    let cardsArray = [];
    let firstCard = null;
    let secondCard = null;
    let lockBoard = false;
    let matches = 0;
    let moveCount = 0;
    let timerInterval = null;
    let seconds = 0;
    let gameStarted = false;

    const startOverlay = document.getElementById("startOverlay");
    const startButton = document.getElementById("startButton");
    const game = document.getElementById("game");
    const message = document.getElementById("message");
    const resetBtn = document.getElementById("resetBtn");
    const backBtn = document.getElementById("backBtn");
    const timerElement = document.getElementById("timer");
    const moveCountElement = document.getElementById("moveCount");
    const resultOverlay = document.getElementById("resultOverlay");
    const finalTimeElement = document.getElementById("finalTime");
    const finalMovesElement = document.getElementById("finalMoves");
    const resultPlayAgain = document.getElementById("resultPlayAgain");
    const resultBack = document.getElementById("resultBack");

    startButton.addEventListener("click", () => {
      startOverlay.style.opacity = "0";
      startOverlay.style.pointerEvents = "none";
      initGame();
    });

    function initGame() {
      cardsArray = [];
      pairs.forEach((pair, index) => {
        cardsArray.push({
          type: "video",
          content: `<video src="${pair.video}" muted loop></video>`,
          pairId: index,
        });
        cardsArray.push({ type: "word", content: pair.word, pairId: index });
      });
      createBoard();
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function createBoard() {
      game.innerHTML = "";
      shuffle(cardsArray);
      matches = 0;
      moveCount = 0;
      seconds = 0;
      moveCountElement.textContent = moveCount;
      timerElement.textContent = "00:00";
      message.textContent = "Encontre os pares correspondentes!";
      firstCard = null;
      secondCard = null;
      lockBoard = false;
      gameStarted = false;
      if (timerInterval) clearInterval(timerInterval);

      cardsArray.forEach((cardData, index) => {
        const card = document.createElement("div");
        card.classList.add("card");
        card.dataset.pairId = cardData.pairId;
        card.dataset.type = cardData.type;
        card.dataset.index = index;

        card.innerHTML = `
          <div class="card-inner">
            <div class="card-front">?</div>
            <div class="card-back ${cardData.type}">${cardData.content}</div>
          </div>
        `;

        card.addEventListener("click", flipCard);
        game.appendChild(card);
      });

      resultOverlay.classList.remove("active");
    }

    function flipCard() {
      if (lockBoard || this.classList.contains("matched") || this === firstCard) return;

      if (!gameStarted) {
        startTimer();
        gameStarted = true;
      }

      this.classList.add("flipped");

      if (!firstCard) {
        firstCard = this;
        return;
      }

      secondCard = this;
      moveCount++;
      moveCountElement.textContent = moveCount;
      lockBoard = true;

      checkForMatch();
    }

    function checkForMatch() {
      const isMatch =
        firstCard.dataset.pairId === secondCard.dataset.pairId &&
        firstCard.dataset.type !== secondCard.dataset.type;

      if (isMatch) {
        matches++;
        disableCards();
        message.textContent = `Par encontrado! ${matches}/${pairs.length} pares`;
        if (matches === pairs.length) endGame();
      } else {
        unflipCards();
      }
    }

    function disableCards() {
      firstCard.classList.add("matched");
      secondCard.classList.add("matched");
      firstCard.removeEventListener("click", flipCard);
      secondCard.removeEventListener("click", flipCard);
      resetBoard();
    }

    function unflipCards() {
      setTimeout(() => {
        firstCard.classList.remove("flipped");
        secondCard.classList.remove("flipped");
        resetBoard();
      }, 1000);
    }

    function resetBoard() {
      [firstCard, secondCard] = [null, null];
      lockBoard = false;
    }

    function startTimer() {
      seconds = 0;
      updateTimer();
      timerInterval = setInterval(updateTimer, 1000);
    }

    function updateTimer() {
      seconds++;
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = seconds % 60;
      timerElement.textContent = `${minutes
        .toString()
        .padStart(2, "0")}:${remainingSeconds.toString().padStart(2, "0")}`;
    }

    function endGame() {
      clearInterval(timerInterval);
      finalTimeElement.textContent = timerElement.textContent;
      finalMovesElement.textContent = moveCount;
      setTimeout(() => resultOverlay.classList.add("active"), 1000);
    }

    resetBtn.addEventListener("click", createBoard);
    backBtn.addEventListener("click", () => (window.location.href = "jogosInicial.html"));
    resultPlayAgain.addEventListener("click", createBoard);
    resultBack.addEventListener("click", () => (window.location.href = "jogosInicial.html"));

    initGame();
  </script>
</body>
</html>
